<?xml version="1.0" encoding="utf-8"?>
<!--
  //////////////////////////////////////////////////////////////////
  // Copyright (c) 2008-2013 Esri. All Rights Reserved.
  //
  // Licensed under the Apache License, Version 2.0 (the "License");
  // you may not use this file except in compliance with the License.
  // You may obtain a copy of the License at
  //
  //    http://www.apache.org/licenses/LICENSE-2.0
  //
  // Unless required by applicable law or agreed to in writing, software
  // distributed under the License is distributed on an "AS IS" BASIS,
  // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  // See the License for the specific language governing permissions and
  // limitations under the License.
  ////////////////////////////////////////////////////////////////
-->
<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="300" height="120"
		 cornerRadius="5" alpha="1.0"
		 close="titlewindow1_closeHandler(event)">
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.events.CloseEvent;
			import mx.events.FlexEvent;
			import mx.managers.PopUpManager;
			
			import spark.events.IndexChangeEvent;
			
			import widgets.Portal.events.SearchByTagEvent;
			import widgets.Portal.events.SortByEvent;
			[Bindable] public var arrDdlRoles:ArrayCollection=new ArrayCollection();
			[Bindable] public var arrDdlEvent:ArrayCollection=new ArrayCollection();
			public var objData:Object=new Object();
			
			[Event(name="sortClick", type="widgets.Portal.events.SortByEvent")]
			
			protected function titlewindow1_closeHandler(event:CloseEvent):void
			{
				PopUpManager.removePopUp(this);
			}
			
			
			
			protected function button1_clickHandler(event:MouseEvent):void
			{
				
				if((objData.Roles.prompt.toString()=="true") && ddlRoles.selectedIndex==-1)
				{
					Alert.show("Please select a Role.","Error");
				}
				else if((objData.Event.prompt.toString()=="true") && ddlEvent.selectedIndex==-1)
				{
					Alert.show("Please select an Event.","Error");
				}
				else
				{
				PopUpManager.removePopUp(this);
				var strSearch:String=new String();
				if(ddlRoles.selectedIndex!=-1)
				{
					strSearch+=ddlRoles.selectedItem;	
				}
				if(ddlEvent.selectedIndex!=-1)
				{
					strSearch+=" "+ddlEvent.selectedItem;
					
				}
				
				var searchEvent:SearchByTagEvent=new SearchByTagEvent(strSearch,SearchByTagEvent.TYPE);
				dispatchEvent(searchEvent);
				}
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<s:VGroup width="100%" height="100%"  horizontalAlign="center" verticalAlign="bottom" alpha="1.0">
		<s:HGroup width="95%" height="100%" horizontalAlign="center" verticalAlign="middle">
			<s:Label text="Roles : " width="50%"  paddingLeft="10"/>
			<s:DropDownList width="100%" id="ddlRoles" dataProvider="{arrDdlRoles}"   prompt="Select Role" />
		</s:HGroup>
		<s:HGroup width="95%" height="100%" horizontalAlign="center" verticalAlign="middle">
			<s:Label  text="Event : " width="50%" paddingLeft="10"/>
			<s:DropDownList  width="100%" id="ddlEvent" dataProvider="{arrDdlEvent}" prompt="Select Event" />
		</s:HGroup>
		<s:HGroup width="100%" height="100%" horizontalAlign="center" verticalAlign="middle">
		    <s:Button label="Ok" click="button1_clickHandler(event)"/>
		</s:HGroup>
		
		
	</s:VGroup>
</s:TitleWindow>
